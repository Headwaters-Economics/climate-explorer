<!DOCTYPE html>
<html>
<head>
    <title>Climate Explorer</title>
    <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="http://openlayers.org/en/v3.10.1/css/ol.css" type="text/css">
    <script src="http://openlayers.org/en/v3.10.1/build/ol.js"></script>

    <script src="/resources/ol3/plugins/ol3-layerswitcher/src/ol3-layerswitcher.js"></script>

    <link rel="stylesheet" href="/resources/ol3/plugins/ol3-layerswitcher/src/ol3-layerswitcher.css" />

    <link rel="stylesheet" href="ls.css" />

<style>
    body {
        margin:0;
        padding:0;
    }
    .container-fluid {
        margin: 0;
        padding: 0;
    }
</style>
</head>
<body>
<div class="container-fluid">

    <div class="row-fluid">
        <div class="span12">
            <div id="map" class="map"></div>
        </div>
    </div>

</div>
<script>
    var url = 'http://coast.noaa.gov/arcgis/rest/services/dc_slr/slr_1ft/MapServer';



    var layers = [
        new ol.layer.Group({
            'title': 'Base maps',
            layers: [
                new ol.layer.Tile({
                    title: 'Satellite',
                    type: 'base',
                    visible: true,
                    source: new ol.source.MapQuest({
                        layer: 'sat'
                    })
                }),
                new ol.layer.Tile({
                    title: 'Stamen - Toner Lite',
                    type: 'base',
                    visible: false,
                    source: new ol.source.Stamen({
                        layer: 'toner-lite'
                    })
                })
            ]
        }),

        new ol.layer.Group({
            title: 'Additional',
            layers: [
                new ol.layer.Tile({
                    title: 'Social Vulnerability Index',
                    visible: true,
                    source: new ol.source.XYZ({
                        url: 'http://coast.noaa.gov/arcgis/rest/services/' +
                        'dc_slr/SOVI/MapServer/tile/{z}/{y}/{x}'
                    })
                }),
                new ol.layer.Tile({
                    title: 'Social Vulnerability Index 2',
                    visible: true,
                    source: new ol.source.TileArcGISRest({
                        url: 'http://commons.wim.usgs.gov/arcgis/rest/services/CDC_SVI/CDC_SVI/MapServer'
                    })
                }),
                new ol.layer.Tile({
                    title: 'Hospitals',
                    visible: true,
                    source: new ol.source.TileArcGISRest({
                        url: 'http://hsip.geoplatform.gov/arcgis/services/HSIP_Public/PublicHealth/MapServer/WMSServer'
                    })
                }),
            ]
        }),

/*
        "id": "abu",
            "name": "Social Vulnerability Index",
            "url": "http://commons.wim.usgs.gov/arcgis/rest/services/CDC_SVI/CDC_SVI/MapServer/export",
            "projection": "EPSG:102100",
            "layers": "",
            "type": "REST",
            "info": {
        "sourceUrl": "http://catalog.data.gov/dataset/cdcs-social-vulnerability-index-svi",
                "sourceEntity": "CDC Health Data Initiative",
                "layerDescription": "Social Vulnerability Index (SoVI) based on 2010 census tracts.",
                "legendImage": "legends/legendimages/abu.png"
    }
 */

        new ol.layer.Group({
            title: 'Overlays',
            layers: [
                new ol.layer.Tile({
                    title: 'Probability of High Shoreline Loss',
                    visible: false,
                    source: new ol.source.TileWMS({
                        url: 'http://marine.usgs.gov/coastalchangehazardsportal/geoserver/proxied/wms',
                        params: {'LAYERS': 'proxied:ProbSLC_conus', 'TILED': true},
                        serverType: 'geoserver'
                    })
                }),
                new ol.layer.Tile({
                    title: 'CAT3 Hurricane Probability of Collision',
                    visible: false,
                    source: new ol.source.TileWMS({
                        url: 'http://marine.usgs.gov/coastalchangehazardsportal/geoserver/proxied/wms',
                        params: {'LAYERS': 'proxied:Erosion_Hazards_1418419535490', 'TILED': true},
                        serverType: 'geoserver'
                    })
                }),
                new ol.layer.Tile({
                    title: 'CAT3 Hurricane Probability of Overwash',
                    visible: false,
                    source: new ol.source.TileWMS({
                        url: 'http://marine.usgs.gov/coastalchangehazardsportal/geoserver/proxied/wms',
                        params: {'LAYERS': 'proxied:Erosion_Hazards_1418665660672', 'TILED': true},
                        serverType: 'geoserver'
                    })
                }),
                new ol.layer.Tile({
                    title: 'CAT3 Hurricane Probability of Inundation',
                    visible: false,
                    source: new ol.source.TileWMS({
                        url: 'http://marine.usgs.gov/coastalchangehazardsportal/geoserver/proxied/wms',
                        params: {'LAYERS': 'proxied:Erosion_Hazards_1418661933827', 'TILED': true},
                        serverType: 'geoserver'
                    })
                }),
                new ol.layer.Tile({
                    title: 'CAT3 Hurricane Mean Water Levels',
                    visible: false,
                    source: new ol.source.TileWMS({
                        url: 'http://marine.usgs.gov/coastalchangehazardsportal/geoserver/proxied/wms',
                        params: {'LAYERS': 'proxied:Erosion_Hazards_1418403296306', 'TILED': true},
                        serverType: 'geoserver'
                    })
                }),
                new ol.layer.Tile({
                    title: 'CAT3 Hurricane Extreme Water Levels',
                    visible: false,
                    source: new ol.source.TileWMS({
                        url: 'http://marine.usgs.gov/coastalchangehazardsportal/geoserver/proxied/wms',
                        params: {'LAYERS': 'proxied:Erosion_Hazards_1418399313701', 'TILED': true},
                        serverType: 'geoserver'
                    })
                })
            ]
        }),
        new ol.layer.Group({
            title: 'Drought',
            layers: [
                new ol.layer.Image({

                    extent: [-13884991, 2870341, -7455066, 6338219],
                    title: 'Current Drought',
                    visible: false,
                    source: new ol.source.ImageWMS({
                        url: './droughtSERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&LAYERS=usdm_current&WIDTH=800&HEIGHT=600&transparent=true&srs=EPSG:4326&styles=default&format=image/png&bbox=-165,15,-60,80',
                        params: {'LAYERS': 'usdm_current'},
                        serverType: 'mapserver'
                    })
                }),
                new ol.layer.Tile({
                    title: 'Flood Hazard Zone',
                    visible: true,
                    source: new ol.source.TileWMS({
                        url: 'http://hazards.fema.gov/gis/nfhl/services/public/NFHLWMS/MapServer/WmsServer',

                        params: {'LAYERS': '4', 'TILED': true},
                        serverType: 'geoserver'
                    })
                })
                    /*
                new ol.layer.Image({
                    title: 'Current Drought',
                    source: new ol.source.ImageWMS({

                        //url: 'http://torka.unl.edu:8080/cgi-bin/mapserv.exe?map=/ms4w/apps/dm/service/usdm_current_wms.map',
                        url: './droughtSERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=usdm_current&WIDTH=800&HEIGHT=600&transparent=true&srs=EPSG:4326&styles=default&format=image/png&bbox=-165,15,-60,80',
                        params: {
                            'LAYERS': ''
                        },
                        serverType: 'mapserver'
                    })
                })*/
            ]
        }),
        new ol.layer.Group({
            title: 'Coastal Flood Risk',
            layers: [
                new ol.layer.Tile({

                    title: 'Inundation from Sea Level Rise (1ft)',
                    visible: true,
                    source: new ol.source.TileArcGISRest({
                        url: 'http://coast.noaa.gov/arcgis/rest/services/dc_slr/slr_1ft/MapServer'
                    })
                }),
                new ol.layer.Tile({

                    title: 'Inundation from Sea Level Rise (2ft)',
                    visible: false,
                    source: new ol.source.TileArcGISRest({
                        url: 'http://coast.noaa.gov/arcgis/rest/services/dc_slr/slr_2ft/MapServer'
                    })
                }),
                new ol.layer.Tile({

                    title: 'Inundation from Sea Level Rise (3ft)',
                    visible: false,
                    source: new ol.source.TileArcGISRest({
                        url: 'http://coast.noaa.gov/arcgis/rest/services/dc_slr/slr_3ft/MapServer'
                    })
                }),
                new ol.layer.Tile({

                    title: 'Inundation from Sea Level Rise (4ft)',
                    visible: false,
                    source: new ol.source.TileArcGISRest({
                        url: 'http://coast.noaa.gov/arcgis/rest/services/dc_slr/slr_4ft/MapServer'
                    })
                }),
                new ol.layer.Tile({

                    title: 'Inundation from Sea Level Rise (5ft)',
                    visible: false,
                    source: new ol.source.TileArcGISRest({
                        url: 'http://coast.noaa.gov/arcgis/rest/services/dc_slr/slr_5ft/MapServer'
                    })
                }),
                new ol.layer.Tile({

                    title: 'Inundation from Sea Level Rise (6ft)',
                    visible: false,
                    source: new ol.source.TileArcGISRest({
                        url: 'http://coast.noaa.gov/arcgis/rest/services/dc_slr/slr_6ft/MapServer'
                    })
                }),
                new ol.layer.Tile({
                    title: 'Coastal Flood Hazard Composite',
                    visible: false,
                    source: new ol.source.TileArcGISRest({
                        url: 'http://coast.noaa.gov/arcgis/rest/services/FloodExposureMapper/CFEM_CoastalFloodHazardComposite/MapServer'
                    })
                })


    ]
        })
    ];

    var projection = new ol.proj.Projection({
        code: 'EPSG:4326',
        units: 'm'
    });

    var map = new ol.Map({
        target: 'map',
        layers: layers,
        view: new ol.View({
        center: [-10997148, 4569099],

//            center: ol.proj.transform([-10997148,4569099], 'EPSG:4326', 'EPSG:3857'),
            zoom: 4
        })
    });

    //var extent = map.getView().calculateExtent(map.getSize());
    //extent = ol.proj.transformExtent(extent, 'EPSG:3857', 'EPSG:4326');

    var layerSwitcher = new ol.control.LayerSwitcher({
        tipLabel: 'Legend' // Optional label for button
    });
    map.addControl(layerSwitcher);

</script>
</body>
</html>